<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="460" viewBox="0 0 1200 460">
  <defs>
    <linearGradient id="bg" x1="0" x2="1" y1="0" y2="1">
      <stop offset="0" stop-color="#0b1220"/>
      <stop offset="1" stop-color="#111827"/>
    </linearGradient>
    <style>
      .title{font:700 26px system-ui, -apple-system, Segoe UI, Roboto, Arial; fill:#e5e7eb}
      .sub{font:500 14px system-ui, -apple-system, Segoe UI, Roboto, Arial; fill:#94a3b8}
      .box{fill:#0f172a; stroke:#1f2937; stroke-width:2}
      .h{font:700 16px system-ui, -apple-system, Segoe UI, Roboto, Arial; fill:#e5e7eb}
      .t{font:500 13px system-ui, -apple-system, Segoe UI, Roboto, Arial; fill:#cbd5f5}
      .tag{fill:#111827; stroke:#334155; stroke-width:1}
      .p{font:700 12px system-ui, -apple-system, Segoe UI, Roboto, Arial; fill:#93c5fd}
      .arrow{stroke:#60a5fa; stroke-width:3; fill:none; marker-end:url(#m)}
    </style>
    <marker id="m" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
      <path d="M0,0 L12,6 L0,12 Z" fill="#60a5fa"/>
    </marker>
  </defs>

  <rect x="0" y="0" width="1200" height="460" rx="18" fill="url(#bg)"/>
  <text x="34" y="58" class="title">Secure integration pattern for Databricks / Snowflake / Glue</text>
  <text x="34" y="86" class="sub">Event-driven: platform → event bus/webhook → (optional enrichment) → PATCHIT ingest. Avoid laptop polling with long-lived admin creds.</text>

  <!-- Sources -->
  <rect x="34" y="130" width="310" height="260" rx="18" class="box"/>
  <text x="58" y="166" class="h">Sources</text>
  <rect x="58" y="190" width="262" height="54" rx="12" class="tag"/>
  <text x="76" y="218" class="p">Databricks Jobs FAILED</text>
  <rect x="58" y="254" width="262" height="54" rx="12" class="tag"/>
  <text x="76" y="282" class="p">Snowflake Tasks/Queries</text>
  <rect x="58" y="318" width="262" height="54" rx="12" class="tag"/>
  <text x="76" y="346" class="p">AWS Glue Job FAILED</text>

  <!-- Eventing -->
  <rect x="378" y="130" width="370" height="260" rx="18" class="box"/>
  <text x="402" y="166" class="h">Eventing + enrichment (recommended)</text>
  <text x="402" y="194" class="t">Webhook / EventBridge / SNS / n8n</text>
  <text x="402" y="216" class="t">Fetch logs with scoped credentials</text>
  <text x="402" y="238" class="t">Build normalized PATCHIT payload</text>
  <rect x="402" y="270" width="322" height="92" rx="12" class="tag"/>
  <text x="420" y="298" class="p">Never put tokens in payload</text>
  <text x="420" y="322" class="t">Store secrets in secret manager</text>
  <text x="420" y="346" class="t">Send only links/excerpts</text>

  <!-- PATCHIT -->
  <rect x="782" y="130" width="384" height="260" rx="18" class="box"/>
  <text x="806" y="166" class="h">PATCHIT</text>
  <text x="806" y="194" class="t">POST /events/ingest</text>
  <text x="806" y="216" class="t">Evidence → RCA → patch → validate</text>
  <text x="806" y="238" class="t">PR (GitHub) or local diff</text>
  <rect x="806" y="270" width="336" height="92" rx="12" class="tag"/>
  <text x="824" y="298" class="p">Runs safely on localhost/server</text>
  <text x="824" y="322" class="t">Audit trail in var/</text>
  <text x="824" y="346" class="t">Provider choice controls data egress</text>

  <!-- Arrows -->
  <path class="arrow" d="M344 260 L 378 260"/>
  <path class="arrow" d="M748 260 L 782 260"/>
</svg>
